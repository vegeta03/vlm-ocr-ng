<h2 class="text-title-large mb-2 mt-6">Raw or Preview of VLM OCR extracted</h2>
<div id="ocrOutput">
  <div class="flex" style="align-items:center; gap: 8px;">
    <div class="status-indicator">
      <span class="status-dot bg-secondary" [class.processing]="state.status()==='processing'"></span>
      <span id="statusText" class="text-body-small">{{ statusText() }}</span>
    </div>
    <button mat-icon-button id="copyButton" [disabled]="state.status()!=='complete'" (click)="copy()" title="Copy to clipboard">
      <span class="material-icons">content_copy</span>
    </button>
    <span class="spacer"></span>
    <button mat-raised-button color="primary" id="downloadButton" [disabled]="state.status()!=='complete'" (click)="download()">Download</button>
  </div>

  <mat-tab-group>
    <mat-tab label="Raw">
      <textarea class="code-text" placeholder="OCR output will appear here" [readOnly]="true" [value]="state.output()"></textarea>
    </mat-tab>
    <mat-tab label="Preview">
      <div class="preview-pane" style="padding: 12px; background: var(--md-surface); color: var(--md-on-surface);">
        @if (state.format() === 'markdown') {
          <div [innerText]="state.output()"></div>
        } @else if (state.format() === 'json') {
          <pre class="code-text">{{ state.output() }}</pre>
        } @else {
          <pre class="code-text">{{ state.output() }}</pre>
        }
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
